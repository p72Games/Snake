<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dominion Games - Snake</title>
<style>
body {
    background: black;
    color: #00ff00;
    font-family: 'Courier New', monospace;
    display: flex;
    flex-direction: column;
    align-items: center;
    margin: 0;
    padding: 0;
}
h1 {
    margin-top: 20px;
    font-size: 2rem;
    text-align: center;
}
canvas {
    background: #111;
    margin-top: 20px;
    border: 2px solid #00ff00;
}
.controls, .difficulty {
    display: flex;
    justify-content: center;
    margin-top: 20px;
}
.controls button, .difficulty button {
    background: #00ff00;
    border: none;
    color: black;
    font-size: 1.5rem;
    padding: 15px;
    margin: 5px;
    border-radius: 5px;
    cursor: pointer;
}
.scoreboard {
    margin-top: 20px;
}
.scoreboard h2 {
    margin: 5px;
}
.scoreboard ul {
    list-style: none;
    padding: 0;
}
.scoreboard li {
    margin: 3px 0;
}
</style>
</head>
<body>
<h1>Dominion Games - Snake</h1>

<div class="difficulty">
    <button onclick="setDifficulty('easy')">Easy</button>
    <button onclick="setDifficulty('medium')">Medium</button>
    <button onclick="setDifficulty('hard')">Hard</button>
</div>

<canvas id="gameCanvas" width="400" height="400"></canvas>

<div class="controls">
    <button onclick="changeDirection('up')">↑</button>
</div>
<div class="controls">
    <button onclick="changeDirection('left')">←</button>
    <button onclick="changeDirection('down')">↓</button>
    <button onclick="changeDirection('right')">→</button>
</div>

<div class="scoreboard">
    <h2>Leaderboard</h2>
    <ul id="leaderboard"></ul>
</div>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
const grid = 20;
let count = 0;
let snake = [{x:160, y:160}];
let dx = grid;
let dy = 0;
let apple = {x:0, y:0};
let score = 0;
let speed = 4; // default medium
let leaderboard = JSON.parse(localStorage.getItem('snakeLeaderboard') || "[]");

function placeApple() {
    apple.x = Math.floor(Math.random() * (canvas.width / grid)) * grid;
    apple.y = Math.floor(Math.random() * (canvas.height / grid)) * grid;
}

function draw() {
    requestAnimationFrame(draw);
    if (++count < speed) return;
    count = 0;

    ctx.fillStyle = '#111';
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    ctx.fillStyle = 'red';
    ctx.fillRect(apple.x, apple.y, grid-1, grid-1);

    const head = {x: snake[0].x + dx, y: snake[0].y + dy};
    snake.unshift(head);

    if(head.x === apple.x && head.y === apple.y){
        score++;
        placeApple();
    } else {
        snake.pop();
    }

    ctx.fillStyle = '#0f0';
    snake.forEach(segment => ctx.fillRect(segment.x, segment.y, grid-1, grid-1));

    if(head.x < 0 || head.x >= canvas.width || head.y < 0 || head.y >= canvas.height || snake.slice(1).some(s => s.x === head.x && s.y === head.y)){
        saveScore();
        resetGame();
    }
}

function resetGame() {
    snake = [{x:160, y:160}];
    dx = grid;
    dy = 0;
    score = 0;
    placeApple();
}

function changeDirection(direction) {
    if(direction === 'left' && dx === 0) { dx = -grid; dy = 0; }
    if(direction === 'right' && dx === 0) { dx = grid; dy = 0; }
    if(direction === 'up' && dy === 0) { dx = 0; dy = -grid; }
    if(direction === 'down' && dy === 0) { dx = 0; dy = grid; }
}

document.addEventListener('keydown', e => {
    if(e.key === 'ArrowLeft') changeDirection('left');
    if(e.key === 'ArrowRight') changeDirection('right');
    if(e.key === 'ArrowUp') changeDirection('up');
    if(e.key === 'ArrowDown') changeDirection('down');
});

// Difficulty levels
function setDifficulty(level){
    if(level === 'easy') speed = 6;
    if(level === 'medium') speed = 4;
    if(level === 'hard') speed = 2;
}

// Swipe controls for mobile
let touchStartX = 0;
let touchStartY = 0;
canvas.addEventListener('touchstart', e => {
    touchStartX = e.touches[0].clientX;
    touchStartY = e.touches[0].clientY;
}, false);

canvas.addEventListener('touchend', e => {
    let touchEndX = e.changedTouches[0].clientX;
    let touchEndY = e.changedTouches[0].clientY;
    let dxSwipe = touchEndX - touchStartX;
    let dySwipe = touchEndY - touchStartY;
    if(Math.abs(dxSwipe) > Math.abs(dySwipe)){
        if(dxSwipe > 0) changeDirection('right');
        else changeDirection('left');
    } else {
        if(dySwipe > 0) changeDirection('down');
        else changeDirection('up');
    }
}, false);

function saveScore() {
    const name = prompt("Game over! Enter your name:");
    if(name){
        leaderboard.push({name: name, score: score});
        leaderboard.sort((a,b)=>b.score - a.score);
        if(leaderboard.length>5) leaderboard.pop();
        localStorage.setItem('snakeLeaderboard', JSON.stringify(leaderboard));
        updateLeaderboard();
    }
}

function updateLeaderboard() {
    const ul = document.getElementById('leaderboard');
    ul.innerHTML = '';
    leaderboard.forEach(entry => {
        const li = document.createElement('li');
        li.textContent = `${entry.name}: ${entry.score}`;
        ul.appendChild(li);
    });
}

placeApple();
updateLeaderboard();
requestAnimationFrame(draw);
</script>
</body>
</html>
